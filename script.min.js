angular.module("ctcaeApp",["ionic","jett.ionic.filter.bar","ui.router"]).controller("HomeCtrl",["$scope","$timeout","$state","sharedService","$ionicScrollDelegate","$ionicFilterBar","$ionicSideMenuDelegate",function(t,e,a,r,s,n,o){t.shareData=r,t.$on("$ionicView.beforeLeave",function(t){document.getElementById("filterBar").style.display="none"}),t.$on("$ionicView.beforeEnter",function(e){t.shareData.flagNum=Object.keys(t.shareData.flags).length,document.getElementById("filterBar").style.display="inherit"}),t.shareData.aeList=ctcae,t.socTitle="All",t.shareData.flags||(t.shareData.flags={}),t.shareData.socList=t.shareData.aeList.map(function(t){return t.soc}).filter(function(t,e,a){return a.indexOf(t)===e});var c=[];for(i in t.shareData.socList){var l=ctcae.map(function(t){return t.soc}).indexOf(t.shareData.socList[i]);c.unshift(l)}for(i in c)t.shareData.aeList.splice(c[i],0,{term:t.shareData.aeList[c[i]].soc,soc:!1});t.getItemHeight=function(t){return t.soc?44:30},t.shareData.getAe=function(){return t.shareData.search?t.shareData.aeList.filter(function(e){return!e.soc||["term","meddra","g1","g2","g3","g4","g5","def","nav"].some(function(a){return e[a].toLowerCase().indexOf(t.shareData.search.toLowerCase())>-1})}).filter(function(t,e,a){try{return!t.soc&&t.term===a[e+1].soc||t.soc}catch(t){console.log("no data in a category")}}):t.shareData.aeList},t.shareData.encode=function(t){for(var e=String(t).length,a=[];e--;){var r=t[e].charCodeAt();a[e]=38===r?"&amp;":62===r?"&gt;":60===r?"&lt;":t[e]}return a.join("")},t.scrollTop=function(){s.scrollTop(!1)},t.toggleLeft=function(){s.scrollTop(!1),t.shareData.search="",o.toggleLeft(),t.shareData.flagNum=Object.keys(t.shareData.flags).length},t.flagging=function(e,a){a.preventDefault(),a.stopPropagation(),t.shareData.flags[e]?delete t.shareData.flags[e]:t.shareData.flags[e]=!0,t.shareData.flagNum=Object.keys(t.shareData.flags).length},t.getItem=function(e,r){e&&(t.shareData.detail=t.shareData.aeList.filter(function(t){return t.meddra===e}),a.go("tabs.detail"))},t.getSoc=function(a){a?(t.socTitle=a,t.shareData.aeList=ctcae.filter(function(t){return t.soc===a}),t.shareData.aeList.unshift({term:a,soc:!1})):(t.socTitle="All",t.shareData.aeList=ctcae),o.toggleLeft(),e(function(){s.scrollTop(!1)},300)},t.getFlag=function(){t.shareData.aeList=ctcae.filter(function(t){for(i in this)if(this[i]===t.meddra)return t},Object.keys(t.shareData.flags));var a=t.shareData.aeList.map(function(t){return t.soc}).filter(function(t,e,a){return a.indexOf(t)===e}),r=[];for(i in a){var n=t.shareData.aeList.map(function(t){return t.soc}).indexOf(a[i]);r.unshift(n)}for(i in r)t.shareData.aeList.splice(r[i],0,{term:t.shareData.aeList[r[i]].soc,soc:!1});t.socTitle='<i class="icon ion-ios-checkmark-outline red-flag head"></i>Flagged',o.toggleLeft(),e(function(){s.scrollTop(!1)},300)},t.showFilterBar=function(){o.isOpen()&&o.toggleLeft(),filterBarInstance=n.show({cancel:function(){t.shareData.search=""}})}}]).controller("DetailCtrl",["$scope","sharedService",function(t,e){t.shareData=e}]).controller("SearchCtrl",["$scope","sharedService",function(t,e){t.shareData=e}]).controller("InfoCtrl",["$scope","sharedService","$ionicPopup",function(t,e){t.shareData=e}]).config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider",function(t,e,a){t.state("tabs",{url:"/tabs",abstract:!0,templateUrl:"tabs.html"}).state("tabs.home",{url:"/home",views:{"tabs-home":{templateUrl:"home.html"}}}).state("tabs.detail",{url:"/detail",views:{"tabs-home":{templateUrl:"detail.html"}}}).state("tabs.info",{url:"/info",views:{"tabs-info":{templateUrl:"info.html"}}}),e.otherwise("/tabs/home"),a.navBar.positionPrimaryButtons("left"),a.tabs.position("bottom"),a.tabs.style("standard"),a.navBar.alignTitle("left"),a.backButton.text(""),a.backButton.previousTitleText("")}]).factory("sharedService",function(){return{text:"sharedService"}}).filter("highlight",["$sce",function(t){return function(e,a){return e&&a&&(e=e.replace(new RegExp("("+a+")","gi"),'<span class="highlighted">$1</span>')),t.trustAsHtml(e)}}]);